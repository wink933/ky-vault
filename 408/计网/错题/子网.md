# 子网划分：主机数与掩码反推
tags: #错题 #408 #计网 #IP

> [!question]- 题干
> 给定网段 192.168.10.0/24，需要划分出至少 6 个子网，并保证每个子网至少 25 台主机可用。问子网掩码是多少？每个子网的主机数是多少？

> [!failure] 我错在哪里
> - 我把“25 台主机”直接当成 2^5=32，所以主机位取 5。
> - 忘了：**可用主机数 = 2^h - 2**（要减去网络地址和广播地址）
> - 结果导致掩码算小了，子网数量也不够。

> [!success] 正确答案
> - 主机位 h：需要满足 2^h - 2 ≥ 25 → h=5 时 30 ≥ 25 ✅
> - 子网位 s：/24 里剩余可借位数 = 8 位
>   - 需要至少 6 个子网：2^s ≥ 6 → s=3（得到 8 个子网）✅
> - 新前缀：/24 + 3 = **/27**
> - 子网掩码：**255.255.255.224**
> - 每子网地址数：2^5=32；可用主机：32-2=**30**

> [!tip]+ 解题步骤（通用流程）
> 1. 先由主机数求主机位 h：2^h - 2 ≥ 主机需求
> 2. 再由子网数求子网位 s：2^s ≥ 子网需求
> 3. 新前缀 = 原前缀 + s
> 4. 每子网可用主机 = 2^h - 2（h = 32 - 新前缀）

> [!warning] 易错点
> - 主机数一定记得 **-2**
> - 子网数有时题目要求“可用子网数”（老教材可能有坑，但 408 通常按 2^s 算）
> - 不要先借位再算主机位，容易互相挤占导致不满足条件

> [!summary]+ 迁移模型（看到这种题就这么做）
> - 识别：题目同时给 “至少多少子网 + 每网至少多少主机”
> - 固定顺序：先主机位 h，再子网位 s
> - 口诀：**主机先保底，子网再扩容；前缀加借位，主机看剩余**

## 关联知识
- [[IP 地址与子网划分]]
- [[CIDR 与路由聚合]]
![[Pasted image 20260122161724.png]]