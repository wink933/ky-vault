---

topic: "以太网（Ethernet）"  
module: "链路层"  
tags:

- "#Ethernet"
    
- "#MAC"
    
- "#CSMA_CD"  
exam_weight: "高"  
one_liner: "把网络层分组封装成帧在同一链路传输：MAC寻址+帧格式+介质访问与差错检测"  
updated: "2026-01-22"
    

---

> [!summary] 🧠 概念卡｜以太网（链路层）
> 
> - 得分抓手：**MAC地址/帧格式/MTU/CSMA-CD/交换机学习转发/冲突域vs广播域**
>     
> - 以太网做的是“同一链路内交付”：目的MAC决定帧往哪走；IP只在帧载荷里
>     
> - 经典共享介质靠CSMA/CD；现代主流是**交换式以太网+全双工**（基本无碰撞）
>     
> - 差错检测靠FCS（CRC），发现错就丢；可靠性交给上层（如TCP重传）
>     

> [!note] 🎯 为什么需要（只写“问题与动机”，不写定义）
> 
> - 网络层只负责“端到端寻址/路由”，但**一跳内**需要可实现的传输规则与格式
>     
> - 多台主机共享一根介质时需要“谁先说/冲突怎么办”（CSMA/CD动机）
>     
> - 需要**硬件可处理**的本地地址体系（MAC）与交换设备可学习的转发机制
>     
> - 需要低成本发现传输错误（CRC），避免把坏数据交给上层浪费资源
>     

> [!info] 🔗 机制链条（背诵版｜结构清晰）
> 
> - 触发(上层交付一个IP数据报/ARP报文给链路层，准备在本链路发送)
>     
> - → 输入(目的MAC、源MAC、上层类型字段、载荷、MTU约束)
>     
> - → 核心步骤〔封装以太网帧→介质访问(共享介质用CSMA/CD；交换式全双工直接发)→接收端按目的MAC过滤→CRC校验→上交网络层〕
>     
> - → 输出〔成功：把载荷交给正确主机/交换机下一跳；失败：CRC错丢弃/冲突退避重发〕
>     
> - → 副作用/代价〔广播会泛洪；共享介质存在碰撞与退避开销；二层环路会引发广播风暴〕
>     
> - → 失败/异常分支〔CRC错→直接丢；碰撞→截断+退避；二层环路→STP介入/否则风暴〕
>     

> [!tip] 🧭 流程/状态机（伪图示｜画关键分支）
> 
> ```text
> 上层交付(数据报/ARP)
>   |
>   v
> 选择目的MAC：
>   - 同网段直达：目的MAC=对端MAC(通常由ARP得到)
>   - 跨网段：目的MAC=默认网关MAC(ARP得到)
>   |
>   v
> 封装以太帧(dst/src/type + payload + FCS)
>   |
>   v
> 介质访问：
>   |-- 共享半双工 --> 载波侦听 -> 空闲发 -> (检测到碰撞?)
>   |                     |-- 否 --> 发送完成
>   |                     '-- 是 --> 发送Jam -> 二进制指数退避 -> 重发(次数上限)
>   |
>   '-- 交换式全双工 --> 直接发送(基本无碰撞)
> 
> 接收端：
>   目的MAC匹配/广播? -> CRC通过? -> 上交(按Type分用：IPv4/ARP/IPv6...)
> ```

> [!abstract] 🧾 最小对比表（只保留能得分的维度）
> 
> |维度|以太网(二层)|Wi-Fi(802.11)|IP(三层)|
> |---|---|---|---|
> |地址|MAC|MAC|IP|
> |冲突处理|CSMA/CD（共享半双工）|CSMA/CA（避免冲突）|无|
> |差错|CRC检测，错丢|检测+链路层重传(常见)|首部校验(IPv4)|
> |典型设备|交换机/网卡|AP/无线网卡|路由器|
> |范围|同链路/同广播域|同BSS/同SSID逻辑域|端到端跨网段|

> [!question] 🧩 真题命题信号词 → 直接定位
> 
> - “帧格式/Type字段/前导码/CRC/FCS/MTU” → 直接考以太帧细节与分用
>     
> - “CSMA/CD、碰撞、退避、最小帧长、传播时延” → 共享介质经典计算题
>     
> - “交换机学习/转发表/MAC表/泛洪/老化” → 二层交换过程题
>     
> - “冲突域/广播域、集线器vs交换机” → 概念辨析高频
>     
> - “二层环路/广播风暴/STP” → 交换网络稳定性考点
>     

> [!warning] ⚠ 易错点清单（带自检）
> 
> -  我是否把“交换式以太网”还当成需要CSMA/CD（全双工基本不碰撞）？
>     
> -  我是否混淆“冲突域”和“广播域”（交换机切冲突域；VLAN/三层设备切广播域）？
>     
> -  我是否把“目的IP决定二层下一跳”说反（应是先路由得下一跳IP，再ARP得下一跳MAC）？
>     
> -  我是否以为“CRC能纠错/保证可靠”（只能检错，错就丢）？
>     
> -  题目说“最小帧长/碰撞可检测”，我是否想到“发送时间≥往返传播时延”的约束？
>     
> -  我是否忘了广播帧会被交换机泛洪到同VLAN所有端口（除入端口）？
>     

> [!success] ✅ 可直接套用的答题骨架（选择/简答通用）
> 
> - 明确层次：以太网=链路层，一跳内交付；IP在载荷里不参与二层转发决策
>     
> - 发送端流程：确定下一跳MAC（ARP）→按帧格式封装→共享介质用CSMA/CD/交换式直接发→接收端按MAC过滤+CRC校验→按Type分用上交
>     
> - 交换机要点：学习源MAC→形成MAC表；目的未知/广播→泛洪；表项老化
>     
> - 代价边界：广播开销、二层环路风险；可靠性不保证，靠上层或链路层重传机制补
>     

> [!quote] 🔗 知识网络（双链串题）
> 
> - “下一跳MAC从哪来”→[[ARP]]（同网段找对端；跨网段找网关）
>     
> - “冲突域/广播域”→[[交换机]]、[[集线器]]、[[VLAN]]
>     
> - “端到端 vs 一跳”→[[IP]]、[[路由与转发]]
>     
> - “不可靠如何补”→[[TCP]]（重传/确认/拥塞控制）与链路层差错检测（CRC）
>