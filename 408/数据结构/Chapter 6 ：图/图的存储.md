---
title: 图的存储
tags:
  - "#邻接矩阵法"
  - "#邻接表法"
  - "#十字矩阵法"
  - "#邻接多重表法"
date: 2026-02-27
---
---

## 图的存储

图的存储必须要完整、准确地反映**顶点集和边集的信息**。针对不同的图结构和算法需求，选择合适的存储方式将显著影响程序的效率，因此所采用的存储结构应与待求解的问题相适应。

### 邻接矩阵法

#### 定义

邻接矩阵存储方法通过一个**一维数组存储图中顶点的信息**，并用一个**二维数组存储边的信息**（各顶点之间的邻接关系）。这个用于存储邻接关系的二维数组称为**邻接矩阵**。
##### 不带权图
顶点数为 $n$ 的图 $G=(V,E)$ 的邻接矩阵 $A$ 是 $n\times n$ 的，将图 $G$ 的顶点编号为 $v_1,v_2,\cdots,v_n$，则

$$  
A[i][j]=  
\begin{cases}  
1, & (v_i,v_j)\text{或}\langle v_i,v_j\rangle \text{是}E(G)\text{中的边}\\
0, & (v_i,v_j)\text{或}\langle v_i,v_j\rangle \text{不是}E(G)\text{中的边}  
\end{cases}  
$$
##### 带权图
若顶点 $v_i$ 和 $v_j$ 之间有边相连，则邻接矩阵中对应位置存放该**边的权值**；若顶点 $v_i$ 和 $v_j$ 不相连，则通常用 0 或 $\infty$ 表示这两个顶点之间不存在边：

$$  
A[i][j]=  
\begin{cases}  
w_{ij}, & (v_i,v_j)\text{或}\langle v_i,v_j\rangle \text{是}E(G)\text{中的边}\\ 
0\text{或}\infty, & (v_i,v_j)\text{或}\langle v_i,v_j\rangle \text{不是}E(G)\text{中的边}  
\end{cases}  
$$
##### 图示

图 6.5 展示了有向图、无向图及带权图（网）对应的邻接矩阵。

![](assets/图的存储/file-20260227110527755.png)
#### 结构体定义

```c
#define MaxVertexNum 100            //顶点数目的最大值
typedef char VertexType;            //顶点对应的数据类型
typedef int EdgeType;               //边对应的数据类型
typedef struct{
    VertexType vex[MaxVertexNum];   //顶点表
    EdgeType edge[MaxVertexNum][MaxVertexNum]; //邻接矩阵，边表
    int vexnum,arcnum;              //图的当前顶点数和边数
}MGraph;
```

#### 注意  
1. 在简单应用中，可以直接使用二维数组作为图的邻接矩阵（顶点信息等均可省略）。  
2. 当邻接矩阵元素仅表示相应边是否存在时，EdgeType 可用值为 0 和 1 的枚举类型。  
3. 邻接矩阵表示法的空间复杂度为 $O(n^2)$，其中 $n$ 为图的顶点数 $|V|$。

#### 特点

1. 无向图的邻接矩阵一定是**对称矩阵**，因此实际存储时只需保存上（或下）三角部分。在顶点编号固定的条件下，该邻接矩阵是唯一的。[[特殊矩阵#对称矩阵]]

2. 对于**无向图**，邻接矩阵第 $i$ 行（或第 $i$ 列）非零元素（或非 $\infty$ 元素）的数量正好是顶点 $i$ 的**度** $TD(v_i)$。

3. 对于**有向图**，邻接矩阵第 $i$ 行非零元素（或非 $\infty$ 元素）的数量是顶点 $i$ 的**出度** $OD(v_i)$；第 $i$ 列非零元素（或非 $\infty$ 元素）的数量则是顶点 $i$ 的**入度** $ID(v_i)$；两者之和是顶点 $i$ 的**度** $TD(v_i)$。
   
4. 使用邻接矩阵存储图时，很容易判断任意两个顶点之间是否有边相连，但要确定图中有多少条边，通常需要**遍历整个矩阵**，**时间代价较大**。  
   
5. **稠密图**（边数较多的图）更适合采用邻接矩阵存储。
   >若边数少会造成空间浪费

6. 设图 $G$ 的邻接矩阵为 $A$，$A^n$ 的元素 $A^n[i][j]$ 代表从顶点 $i$ 到顶点 $j$ 长度为 $n$ 的路径数量。这一结论了解即可，具体证明可参考离散数学教材。
   >![](assets/图的存储/file-20260227112138879.png)