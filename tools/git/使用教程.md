# Git 全局使用教程（终端 + GitHub + VS Code，一篇打通）

---
## 0. 你学完这一篇能做到什么

- 在本地用 Git 管理任何项目：初始化、提交、查看历史、回滚、分支
    
- 在 GitHub 上建仓库并和本地联动：push / pull / clone
    
- 在 VS Code 里完成同样操作：可视化 staging、commit、resolve conflict
    
- 避开新手最常见的坑：`merge vs rebase`、冲突、误用 `reset --hard`
    

---

## 1. Git 与 GitHub：先把关系讲清楚

- **Git**：版本控制工具（在你电脑上运行），核心是“提交（commit）= 快照”。
    
- **GitHub**：远端托管平台（存你的 Git 仓库），提供协作、PR、Issue、Actions 等。
    

> 结论：你可以只用 Git 不用 GitHub；但想备份/多设备/协作，GitHub 很有用。

---

## 2. Git 的核心模型：三块区域 + 一条历史线

### 2.1 三块区域

- **[[工作区]] (Working Tree)**：你正在改的文件
    
- [[暂存区]] (Staging Area / Index)**：你“选中准备提交”的改动
    
- **[[仓库]] (Repository / .git)**：提交历史和对象数据库（本地隐藏目录 `.git`）
    

### 2.2 一条历史线

- 每次[[ commit ]]生成一个节点（快照），串成一条线
    
- [[分支]]（branch）本质是“指向某个提交的指针”
    
- `HEAD` 指向你当前所在的分支/提交
    

---

## 3. 安装与初始配置（只做一次）

### 3.1 安装 Git

- macOS：`brew install git`（或装 Xcode Command Line Tools）
    
- Windows：安装 Git for Windows（带 Git Bash）
    
- Linux：apt/yum/pacman 安装
    

### 3.2 必做配置

```bash
git config --global user.name "Your Name"
git config --global user.email "you@example.com"
git config --global init.defaultBranch main
```

检查：

```bash
git config --global -l
```

### 3.3 （强烈建议）设置 SSH Key 用于 GitHub

```bash
ssh-keygen -t ed25519 -C "you@example.com"
```

把公钥内容复制到 GitHub：`~/.ssh/id_ed25519.pub`

测试：

```bash
ssh -T git@github.com
```

> 你也可以用 HTTPS + Token，但 SSH 对长期使用更省心。

---

## 4. 本地 Git：从 0 到 1（任何项目都通用）

### 4.1 初始化一个仓库

进入项目目录：

```bash
cd /path/to/project
git init
```

### 4.2 看当前状态

```bash
git status
```

### 4.3 提交一次：add → commit

```bash
git add -A
git commit -m "init project"
```

### 4.4 常用查看命令（建议背下来）

```bash
git log --oneline --graph --decorate
git diff
git diff --staged
```

---

## 5. .gitignore：决定哪些文件不进版本库

新建 `.gitignore`（放在项目根目录），常见忽略项：

- Node：`node_modules/`
    
- Python：`__pycache__/`, `.venv/`
    
- Java：`target/`
    
- IDE：`.vscode/`（看情况），`.idea/`
    
- OS：`.DS_Store`
    

示例：

```gitignore
# OS
.DS_Store
Thumbs.db

# Node
node_modules/

# Python
__pycache__/
.venv/

# Logs
*.log
```

> 原则：**源代码/配置/文档**进仓库；**产物/缓存/依赖**一般不进仓库。

---

## 6. 远端 GitHub：本地 ↔ 远端的完整闭环

### 6.1 两种起步方式（新手建议先选 A）

#### A) 先本地写，再推到 GitHub（最稳）

1. 本地已有项目并已 commit
    
2. GitHub 创建空仓库（不要勾 README/License/ignore）
    
3. 绑定远端并推送：
    

```bash
git remote add origin git@github.com:USER/REPO.git
git branch -M main
git push -u origin main
```

#### B) 先 GitHub 建仓库，再 clone 到本地

```bash
git clone git@github.com:USER/REPO.git
cd REPO
```

### 6.2 日常同步：pull → work → commit → push

```bash
git pull
# 修改文件
git add -A
git commit -m "feat: ..."
git push
```

### 6.3 remote 常用命令

```bash
git remote -v
git remote set-url origin <new_url>
```

---

## 7. 分支：你会真正“用 Git”从这里开始

### 7.1 为什么要分支

- 主分支 `main` 保持稳定
    
- 新功能/实验/修 bug 在新分支做
    
- 做完合并回主分支
    

### 7.2 创建/切换分支

```bash
git switch -c feature/login
# 或老命令：git checkout -b feature/login
```

切回主分支：

```bash
git switch main
```

### 7.3 合并分支（merge）

```bash
git switch main
git merge feature/login
```

---

## 8. 合并冲突：一定会遇到，但不难

### 8.1 冲突出现的典型场景

- 你和别人（或你另一台电脑）同时改了同一文件的同一段
    

### 8.2 冲突标记长这样

```text
<<<<<<< HEAD
你的内容
=======
对方内容
>>>>>>> branch
```

### 8.3 解决步骤

1. 打开冲突文件，手动选择保留内容，删掉标记
    
2. `git add` 标记已解决
    
3. `git commit`
    

```bash
git add path/to/file
git commit -m "resolve conflict"
```

> VS Code 对冲突有按钮：Accept Current / Incoming / Both，非常好用（后面会讲）。

---

## 9. 撤销与回滚：新手最需要掌握的“救命技能”

> 这部分按“破坏性从低到高”排序。

### 9.1 撤销工作区改动（未 add）

```bash
git restore file
git restore .
```

### 9.2 撤销暂存区（已 add 但未 commit）

```bash
git restore --staged file
```

### 9.3 “后悔了，再改改”——修改最近一次提交（未 push 时最常用）

```bash
git commit --amend
```

### 9.4 回退到某个提交：两种路线

#### 安全路线：revert（推荐）

生成一个“反向提交”，不改历史：

```bash
git revert <commit_id>
```

#### 强力路线：reset（慎用）

- 回退但保留改动在工作区：
    

```bash
git reset --soft <commit_id>
```

- 回退并清空暂存区：
    

```bash
git reset --mixed <commit_id>
```

- 回退并丢弃一切改动（危险）：
    

```bash
git reset --hard <commit_id>
```

> **如果已经 push 到远端**，尽量用 `revert`，不要随便 `reset --hard` + force push。

---

## 10. Rebase：什么时候用、怎么不翻车

### 10.1 rebase 在做什么

把你的分支提交“挪到”另一个分支最新提交之后，让历史更直线。

常用：更新你当前分支到最新 main：

```bash
git switch feature/login
git fetch origin
git rebase origin/main
```

### 10.2 新手建议的规则

- **个人分支、没共享**：可以 rebase（历史好看）
    
- **已经共享/多人在用的分支**：尽量别 rebase（容易把别人历史搞乱）
    

---

## 11. GitHub 协作必备：PR（Pull Request）工作流

### 11.1 标准协作流程

1. 从 main 拉分支：`feature/x`
    
2. 提交并 push 分支
    
3. 在 GitHub 发 PR：feature/x → main
    
4. 评审（review）+ CI
    
5. 合并（merge / squash / rebase）
    

### 11.2 三种合并方式（GitHub 上常见）

- **Merge commit**：保留分支结构，历史完整
    
- **Squash merge**：把分支多个 commit 压成一个（最干净，团队常用）
    
- **Rebase merge**：线性历史，但要理解 rebase
    

---

## 12. VS Code 里用 Git（图形化 + 终端都能）

### 12.1 打开 Source Control 面板（左侧分支图标）

你会看到：

- Changes（工作区改动）
    
- Staged Changes（暂存区）
    
- Commit Message 输入框
    

### 12.2 常见操作映射

|你想做的事|VS Code|终端等价|
|---|---|---|
|查看改动|文件 diff|`git diff`|
|暂存某个文件|点击 “+”|`git add file`|
|暂存全部|“Stage All”|`git add -A`|
|提交|输入信息 → Commit|`git commit -m`|
|推送/拉取|Sync / Push / Pull|`git push/pull`|
|解决冲突|Accept Current/Incoming/Both|手动改 + `git add`|

### 12.3 VS Code 里克隆仓库

Command Palette（⌘/Ctrl+Shift+P）：

- `Git: Clone` → 粘贴 GitHub 地址
    

### 12.4 VS Code 里创建分支

左下角分支名 → Create new branch

---

## 13. 终端常用命令速查（建议固化成单独笔记）

```bash
# 初始化 / 克隆
git init
git clone <url>

# 状态 / 差异 / 历史
git status
git diff
git diff --staged
git log --oneline --graph --decorate

# 提交
git add <file>
git add -A
git commit -m "msg"
git commit --amend

# 分支
git branch
git switch <branch>
git switch -c <new-branch>
git merge <branch>

# 远端
git remote -v
git fetch
git pull
git push

# 撤销
git restore <file>
git restore .
git restore --staged <file>
git revert <commit>
git reset --soft|--mixed|--hard <commit>
```

---

## 14. 新手最常见的坑（提前避雷）

1. **没写 .gitignore**：把依赖/缓存全提交上去了
    
2. **提交信息太随意**：以后根本回溯不动
    
3. **在已 push 的公共分支上 reset/rebase**：历史炸裂
    
4. **不 pull 就写**：多设备/多人必冲突
    
5. **把密码/Token/私钥提交上 GitHub**：严重事故
    
    - 任何敏感信息用 `.env`，并加入 `.gitignore`
        

---

## 15. 推荐你练习的 6 个小任务（真正学会靠动手）

1. 新建目录 → `git init` → 提交 3 次
    
2. 新建分支 `feature/a` 改文件 → merge 回 main
    
3. 人为制造冲突（两分支改同一行）→ 用 VS Code 解决
    
4. 用 `git revert` 撤销一次提交
    
5. 用 `git commit --amend` 修改提交信息
    
6. 推到 GitHub → 换一台电脑 `clone` 下来继续提交
    

---

## 16. 你后续想深入的方向（按收益排序）

- **GitHub PR 工作流**（团队协作必备）
    
- **rebase / interactive rebase**（整理提交历史）
    
- **cherry-pick**（挑某个提交搬到另一个分支）
    
- **tag + release**（版本发布）
    
- **GitHub Actions**（自动化测试/构建）
    

---

如果你愿意，我可以再给你两份“可以直接固化”的补充笔记：

1. **《Git 冲突处理手册（VS Code 版）》**：专门讲冲突出现原因、一步步处理、常见案例
    
2. **《GitHub 协作手册（PR 模板 + Review 清单）》**：适合以后做课程项目/组队开发
    

你现在用的是 **macOS 还是 Windows**？（我会把命令/路径/截图式说明更贴合你的环境。）